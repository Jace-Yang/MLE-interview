# 文件系统

文件是具有符号名、由字节序列构成的数据项集合。是文件系统的基本数据单位。文件名是文件的标识符号。

进程访问文件数据前必须先“打开”文件，文件描述符是打开文件的标识。内核跟踪进程打开的所有文件，为每个进程维护一个打开文件列表，里面有打开文件状态和信息：

- 文件指针：最近一次读写位置，每个进程分别维护自己的打开文件指针。
- 文件打开计数：最后一个进程关闭文件时，将其从打开文件表中移除。
- 文件的磁盘位置信息
- 访问权限

操作系统的文件视图是**数据块**的集合。数据块是逻辑存储单元，而**扇区**是物理存储单元。数据块通常由多个扇区组成。

文件系统中的基本操作单元是数据块。进程读文件，需要获得字节所在的数据块，整块读出来，然后返回数据块内对应的部分；进程写文件，需要获取数据块，修改数据块中对应的部分，然后写回数据块。例如，getc(),putc()即使每次只访问1字节的数据，也需要缓存目标数据4096字节。

